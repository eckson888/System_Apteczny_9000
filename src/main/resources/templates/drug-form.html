<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Add drugstore</title>
</head>
<body>
<div>
    <form method="post">
        <div>
            <label for="searchInput">Enter a name,active substance or whatever</label>
            <input type="text" placeholder="keyword" id="searchInput">
        </div>
        <div id="searchResults"></div>
        <div>
            <label for="common_name">Common Name</label>
            <input type="text" placeholder="Common name"  id="common_name">
        <div>
            <label for="active_substance">Active Substance</label>
            <input type="text" placeholder="Active Substance" id="active_substance">
        </div>
        <div>
            <label for="pharmaceutical_form">Pharmaceutical Form</label>
            <input type="text" placeholder="pharmaceutical_form"  id="pharmaceutical_form">
        </div>
        <div>
            <label for="quantity">Quantity</label>
            <input type="number" placeholder="Quantity" th:field="*{drugstoreItem.quantity}" id="quantity">
        </div>
        <button type="submit" style="margin:5px">Add</button>
    </form>
</div>
</body>

<script>
    document.getElementById('searchInput').addEventListener('input', function ()
    {
        const keyword = this.value;
        if (keyword.length >= 3)
        {
            fetch(`/drugstore-inventory/search?keyword=${encodeURIComponent(keyword)}`)
                .then(response => response.json())
                .then(data => {
                const searchResultsDiv = document.getElementById('searchResults');
                searchResultsDiv.innerHTML = '';

                if (data && data.length)
                {
                    data.forEach(drug => {
                        const drugItem = document.createElement('div');
                        drugItem.textContent = drug;
                        searchResultsDiv.appendChild(drugItem);
                    });
                } else {
                    searchResultsDiv.textContent = 'No results found';
                }
            })
                .catch(error => {console.error('Error fetching search results:', error);});
        }
    });
</script>
</html>